<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cash Register</title>
    </head>
    <body>
        
        <script>
            function checkCashRegister(price, cash, cid) {
            // let final = {};
            // z = 0;
            let changes = Math.round(cash*100) - Math.round(price*100);
            let cashOnHand = {};
            let cashToGive = {};

            let sample = [
                ['PENNY', 1], 
                ['NICKEL', 5],
                ['DIME', 10],
                ['QUARTER', 25],
                ['ONE', 100],
                ['FIVE', 500],
                ['TEN' , 1000],
                ['TWENTY' ,2000],
                ['HUNDERED', 10000]
            ];

            cid.forEach(function(denom) {
                cashOnHand[denom[0]] = Math.round(denom[1] * 100);
            });

            let index = sample.length - 1;

            while (index >= 0 && changes > 0 ){
                let moneyN = sample[index][0];
                let moneyV = sample[index][1];

                if( changes - moneyV > 0 && cashOnHand[moneyN], changes){
                    cashToGive[moneyN] = 0;
                    while (cashOnHand[moneyN] > 0 && changes - moneyV >= 0){
                        cashOnHand[moneyN] -= moneyV;
                        cashToGive[moneyN] += moneyV;
                        changes -= moneyV;
                    }
                }
                index -= 1;
            }

            if (changes === 0) {
                let isEmpty = true;

                Object.keys(cashOnHand).forEach(function(moneyType) {
                    if (cashOnHand[moneyType] > 0) {
                        isEmpty = false;
                    }
                });
                if (isEmpty) {
                    return {
                        status: "CLOSED", 
                        change: cid
                    }
                }
                    else{
                        let changeArray = [];
                        Object.keys(cashToGive).map(function(moneyType) {
                            if (cashToGive[moneyType] > 0) {
                                changeArray.push([moneyType, cashToGive[moneyType] / 100]);
                            };
                        });
                        return {status: 'OPEN', change: changeArray} 
                    }
                }

        
            return {status: 'INSUFFICIENT_FUNDS', change: []} 

                // for(let money of monies){
                //     cidTotal += (money[1]*100);
                // }
                // if (change > cidTotal) {
                //     return {status = 'INSUFFICIENT_FUNDS', change: []}
                // }
                // else if (change === cidTotal) {
                //     return {status = 'CLOSED', change: cid}
                // }
                // else{
                //     cid = cid.reverse();
                //     for(let one of many){
                //         one[1] = one[1]*100;
                //         while 
                //     }
                // }

            // let constructorObject = newArr => {
            //     return newArr.reduce((acc, val) =>{
            //         const [key, value] = val;
            //         acc[key] = value;
            //         return acc;
            //     }, {});
            // };

            // let currency = constructorObject(cid);
            
            // let arr = Object.keys(currency);
            // let arrC = Object.values(currency);
            // let arrO = Object.values(sample);
            

            // for (let cu = 0; cu < cid.length; cu++) {
            //     cidTotal += cid[cu][1]*100;
                
            //     if (cidTotal === change) {
            //         final.status = 'CLOSED'
            //     }
            //     if (cidTotal < change ) {
            //         final.status = 'INSUFFICIENT_FUNDS'
            //     }
            //     if (cidTotal > change) {
            //         if (change % cid[cu][1] !==0) {
            //         final.status = 'INSUFFICIENT_FUNDS'
                        
            //         }
            //         else{
            //         final.status = 'OPEN'

            //         }
            //     }
                
            // }
            // return final;
            // console.log(cidTotal)
            }
    </script>
</body>
</html>